<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Order Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/order.css}">

</head>
<body th:data-initial-cart-items="${initialCartItemsJson}">

<div th:replace="~{fragments/navbar :: navbarFragment}"></div>

<div class="container">
    <section class="card product-list">
        <h2>상품 목록</h2>
        <div id="product-items-container">
            <div th:each="product : ${products}" class="product-item detail-btn"
                 style="cursor: pointer;"
                 th:data-id="${product.productId}"
                 th:data-name="${product.name}"
                 th:data-price="${product.price}"
                 th:data-stock="${product.stock}"
                 th:data-image="${product.imageUrl}">

                <div class="product-info">
                    <img th:src="${product.imageUrl}" alt="커피콩">
                    <div class="product-details">
                        <p class="name" th:text="${product.name}">상품 이름</p>
                        <p class="desc">향긋한 원두 커피</p>
                    </div>
                </div>
                <span class="price" th:text="${#numbers.formatInteger(product.price, 3, 'COMMA')} + '원'"></span>

                <button class="add-btn">추가</button>
            </div>
        </div>
    </section>

    <aside class="card summary">
        <form id="order-form" class="card summary" th:action="@{/orders/payment}" method="post">
            <h2>주문내역</h2>
            <ul id="summary-item-list" class="summary-item-list"></ul>
            <div class="form-group">
                <label for="email">이메일</label>
                <input type="email" id="email" name="email" placeholder="devCourse@gmail.com">
            </div>
            <div class="form-group">
                <label for="customerName">주문자명</label>
                <input type="text" id="customerName" name="customerName">
            </div>
            <div class="form-group">
                <label for="address">주소</label>
                <input type="text" id="address" name="address">
            </div>
            <div class="form-group">
                <label for="zipcode">우편번호</label>
                <input type="text" id="zipcode" name="zipcode">
            </div>
            <div class="notice">
                <span id="notice">당일 오후 2시 이후의 주문 건은 다음 날 배송이 시작됩니다.</span>
            </div>
            <div class="total-section">
                <span>총금액</span>
                <span id="total-price">0원</span>
            </div>
            <button type="submit" class="checkout-btn">결제하기</button>
        </form>
    </aside>
</div>

<div id="productModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <img id="modalImage" src="" alt="상품 이미지">
        <h2 id="modalName">상품 이름</h2>
        <p><span>산지:</span> <span id="modalOrigin"></span></p>
        <p><span>맛과 향:</span> <span id="modalFlavor"></span></p>
        <p><span>특징:</span> <span id="modalFeature"></span></p>
        <p><span>가격:</span> <span id="modalPrice"></span></p>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/order.js}"></script>

</body>
</html>